SELECT DISTINCT
    vGS.TblPerson_Id,
    vGS.TblStudent_Id,

    (select count(vRTP.TblToPerson_serviceTblPersonFrom) from SettingConsumer_{{ ConsumerAcronym }}.viewRelationshipToPerson vRTP
        where vRTP.TblToPerson_serviceTblPersonTo = vGS.TblPerson_Id
        and vRTP.TblType_Name = 'Geschwisterkind'
        limit 0,1
    ) Sibling_Count,

    vGS.TblStudent_Identifier,
    vGS.TblStudent_SchoolAttendanceStartDate,
    vGS.TblStudentBaptism_Location,
    vGS.StudentNameAgreement,
    vGS.TblStudentFocusType_Namelist,
    vGS.TblStudentDisorderType_Namelist,

    vGS.TblStudentIntegration_CoachingRequestDate,
    vGS.TblStudentIntegration_CoachingCounselDate,
    vGS.TblStudentIntegration_CoachingDecisionDate,
    vGS.TblStudentIntegration_CoachingRequired,
    vGS.TblStudentIntegration_CoachingTime,
    vGS.TblStudentIntegration_CoachingRemark,
    vGS.TblSalutation_Salutation_Coach,
    vGS.TblPerson_FirstName_Coach,
    vGS.TblPerson_LastName_Coach,
    vGS.TblStudentLiberationType_Name,
    vGS.TblStudentLiberationType_Description,
    vGS.TblStudentLiberationCategory_Name,
    vGS.TblStudentLiberationCategory_Description,
    vGS.TblStudentLocker_LockerNumber,
    vGS.TblStudentLocker_LockerLocation,
    vGS.TblStudentLocker_KeyNumber,
    vGS.TblStudentMedicalRecord_Disease,
    vGS.TblStudentMedicalRecord_Medication,
    vGS.TblStudentMedicalRecord_InsuranceState,
    vGS.TblStudentMedicalRecord_Insurance,

    vGS.TblStudentTransport_Route,
    vGS.TblStudentTransport_StationEntrance,
    vGS.TblStudentTransport_StationExit,
    vGS.TblStudentTransport_Remark

    from SettingConsumer_{{ ConsumerAcronym }}.viewGroupStudent vGS
        JOIN SettingConsumer_{{ ConsumerAcronym }}.viewGroupStudentTransfer vGST ON vGST.TblStudent_Id = vGS.TblStudent_Id
        JOIN SettingConsumer_{{ ConsumerAcronym }}.viewGroup vG ON vG.TblPerson_Id = vGS.TblPerson_Id

    where vG.TblGroup_MetaTable = 'STUDENT'